<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Profile • UnseenRealm</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,system-ui,sans-serif}
body{
  background:#0b0014;color:#fff;min-height:100vh;
  display:flex;flex-direction:column;align-items:center;overflow-x:hidden;
}

/* BACKGROUNDS */
body::before,body::after{content:"";position:fixed;inset:0;z-index:-2}
body::before{
  background:
    radial-gradient(circle at 15% 20%,#ff00f540,transparent 50%),
    radial-gradient(circle at 80% 80%,#00e1ff30,transparent 55%),
    #0b0014;
}
body::after{
  background:radial-gradient(circle,#ff00f555,transparent 60%);
  mix-blend-mode:screen;filter:blur(140px);animation:g 9s infinite alternate;
}
@keyframes g{0%{opacity:.4}100%{opacity:.95}}

/* FLOATING DOTS */
.dot-field{position:fixed;inset:0;z-index:-1;pointer-events:none}
.dot{
  position:absolute;width:7px;height:7px;border-radius:50%;
  background:#ff00f5;filter:blur(2px);opacity:.75;
  animation:d 6s infinite ease-in-out;
}
.dot:nth-child(3n){background:#00e1ff}
@keyframes d{
 0%{transform:translateY(0)}
 50%{transform:translateY(-35px) scale(1.3)}
 100%{transform:translateY(0)}
}

/* NAV */
.nav{
  position:fixed;top:0;width:100%;padding:1rem 2rem;
  display:flex;justify-content:space-between;align-items:center;
  background:rgba(0,0,0,.35);backdrop-filter:blur(14px);z-index:200;
}
.logo{font-size:1.65rem;font-weight:800}
.logo span{color:#ff00f5}
#navLinks a{
  margin-left:1rem;color:#fff;text-decoration:none;position:relative;font-size:.95rem;
}
#navLinks a::after{
  content:"";position:absolute;left:0;bottom:-3px;width:0;height:2px;background:#ff00f5;transition:.25s;
}
#navLinks a:hover::after{width:100%}

/* CARD */
.auth-page{
  width:100%;max-width:440px;margin-top:7rem;padding:2.2rem 2.4rem;
  background:rgba(255,255,255,.05);border-radius:22px;
  backdrop-filter:blur(18px);border:1px solid rgba(255,255,255,.15);
  box-shadow:0 0 28px rgba(255,0,245,.25);animation:fade .4s ease;
}
@keyframes fade{
 0%{opacity:0;transform:translateY(25px)}
 100%{opacity:1;transform:translateY(0)}
}

h1{
  font-size:2rem;font-weight:800;
  background:linear-gradient(90deg,#ff00f5,#00e1ff);
  -webkit-background-clip:text;color:transparent;margin-bottom:.4rem;
}
.muted{color:#bbb;margin-bottom:1.3rem;font-size:.9rem}

/* FIELDS */
.field-group{margin-bottom:1.3rem}
label{font-size:.9rem;color:#ddd;display:block;margin-bottom:.3rem}

.checkbox-grid{
  display:grid;grid-template-columns:1fr 1fr;gap:.65rem;margin-top:.7rem;
}
.check-pill{
  display:flex;align-items:center;gap:.5rem;
  padding:.55rem .8rem;border-radius:12px;cursor:pointer;
  background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);
  transition:.25s;
}
.check-pill:hover{transform:scale(1.04)}
.check-pill input{accent-color:#ff00f5;transform:scale(1.15)}

.select{
  width:100%;padding:.8rem 1rem;border-radius:12px;
  background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18);
  font-size:.9rem;color:#fff;appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 10 6' width='14' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%23fff' stroke-width='1.4' fill='none'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right 1rem center;background-size:14px;
}

/* BUTTON */
.btn-primary{
  width:100%;padding:.9rem;border-radius:12px;
  background:linear-gradient(90deg,#ff00f5,#00e1ff);
  border:none;color:#fff;font-weight:700;font-size:1rem;
  cursor:pointer;transition:.25s;margin-top:.6rem;
}
.btn-primary:hover{
  transform:scale(1.03);box-shadow:0 0 22px #ff00f566;
}

/* STATUS */
.status{
  margin-top:1rem;color:#ff6ec7;text-align:center;min-height:1.2rem;
}

.footer{
  margin-top:2rem;margin-bottom:1rem;color:#777;font-size:.85rem;text-align:center;
}
</style>
</head>

<body>

<header class="nav">
  <div class="logo">Unseen<span>Realm</span></div>
  <nav id="navLinks">
    <a href="index.html">Home</a>
    <a href="explore.html">Explore</a>
    <a href="#" id="logoutBtn">Logout</a>
  </nav>
</header>

<div class="dot-field">
  <div class="dot" style="top:18%;left:18%"></div>
  <div class="dot" style="top:60%;left:72%"></div>
  <div class="dot" style="top:82%;left:28%"></div>
  <div class="dot" style="top:32%;left:84%"></div>
  <div class="dot" style="top:14%;left:55%"></div>
</div>

<main class="auth-page">

  <h1>Your Travel DNA</h1>
  <p id="profileWelcome" class="muted">Loading your preferences...</p>

  <form id="profileForm">

    <!-- INTERESTS -->
    <div class="field-group">
      <label>What are you into?</label>
      <p class="muted" style="margin-bottom:.6rem;">Pick a few to fine-tune your feed.</p>

      <div id="interestCheckboxes" class="checkbox-grid">
        <label class="check-pill"><input type="checkbox" value="food"><span>Food & cafés</span></label>
        <label class="check-pill"><input type="checkbox" value="culture"><span>Culture & art</span></label>
        <label class="check-pill"><input type="checkbox" value="nature"><span>Nature & viewpoints</span></label>
        <label class="check-pill"><input type="checkbox" value="nightlife"><span>Nightlife & music</span></label>
        <label class="check-pill"><input type="checkbox" value="adventure"><span>Adventure & hikes</span></label>
        <label class="check-pill"><input type="checkbox" value="budget"><span>Budget spots</span></label>
      </div>
    </div>

    <!-- MOOD -->
    <div class="field-group">
      <label>Your usual vibe?</label>
      <p class="muted" style="margin-bottom:.6rem;">Boost results that match how you travel.</p>

      <select id="profileMood" class="select">
        <option value="any">Depends on the day</option>
        <option value="chill">Chill & relaxed</option>
        <option value="social">Social & outgoing</option>
        <option value="adrenaline">Adrenaline & action</option>
        <option value="budget">Budget friendly</option>
      </select>
    </div>

    <button class="btn-primary" type="submit">Save Preferences</button>
  </form>

  <p id="profileStatus" class="status"></p>

</main>

<footer class="footer">Preferences securely stored in Firebase</footer>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig={
  apiKey:"AIzaSyA7qrQeypEYFhKCvQjM-5PaMaYpTFJZ-mk",
  authDomain:"unseenrealm-b43d9.firebaseapp.com",
  projectId:"unseenrealm-b43d9",
  storageBucket:"unseenrealm-b43d9.firebasestorage.app",
  messagingSenderId:"893669581410",
  appId:"1:893669581410:web:ebfdbdeacc27dced73673b"
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();

/* -------- LOAD PROFILE -------- */
auth.onAuthStateChanged(async user=>{
  if(!user) return location.href="login.html";

  const snap=await db.collection("users").doc(user.uid).get();
  const data=snap.data()||{};

  profileWelcome.innerHTML=`Hello, <b>${data.name||"Explorer"}</b>`;

  /* Interests */
  const saved=data.interests||[];
  document.querySelectorAll("#interestCheckboxes input").forEach(ch=>{
    if(saved.includes(ch.value)) ch.checked=true;
  });

  /* Mood */
  profileMood.value=data.mood||"any";
});

/* -------- SAVE PROFILE -------- */
profileForm.addEventListener("submit",async e=>{
  e.preventDefault();
  profileStatus.textContent="Saving...";

  const user=auth.currentUser;
  if(!user) return location.href="login.html";

  const interests=[...document.querySelectorAll("#interestCheckboxes input:checked")].map(i=>i.value);
  const mood=profileMood.value;

  await db.collection("users").doc(user.uid).update({interests,mood});

  profileStatus.style.color="#00ffa6";
  profileStatus.textContent="Preferences saved!";
  setTimeout(()=>location.href="explore.html",900);
});

/* -------- LOGOUT -------- */
document.getElementById("logoutBtn").onclick=()=>{
  auth.signOut().then(()=>location.href="login.html");
};
</script>

</body>
</html>
